# 逃离千禧年 (2000sEscape) - 设计文档

## 游戏概念
- **类型**: 2D像素风搜打撤游戏
- **风格**: 怪核/池核 (Weirdcore/Dreamcore)
- **氛围**: 怀旧、孤寂、千禧年幻梦感
- **平台**: RPG Maker MZ

---

## 核心循环

```
梦境大厅 → 选择回忆节点 → 进入搜打撤关卡 → 搜集回忆物品 → 战斗/躲避 → 找到撤离点 → 结算回忆价值 → 返回梦境大厅
```

---

## 系统设计

### 1. 回忆物品系统 (Memory Items)

**物品分类**:
- **可使用物品**: 有功能性效果（治疗、加速、照明等）
- **收藏品**: 纯粹的回忆价值，不能使用
- **关键物品**: 解锁特定区域或剧情

**回忆价值**:
- 每个物品有 `memoryValue` 属性（1-100）
- 结算时转换为回忆货币

**物品示例**:
- 旧玩具车 (价值: 15)
- 泛黄的照片 (价值: 30)
- 褪色的红包 (价值: 25)
- 小霸王游戏卡带 (价值: 45)
- 奶奶的针线盒 (价值: 50)

### 2. 即时碰撞战斗系统

**玩家战斗**:
- 按键攻击（空格/确认键）
- 攻击方向：面朝方向
- 攻击范围：前方1格 + 左右各1格（扇形）
- 攻击冷却：0.5秒

**敌人类型**:
- **梦魇**: 普通敌人，巡逻状态
- **阴影**: 快速但脆弱
- **执念**: 强力但缓慢

**战斗机制**:
- 碰撞伤害：接触敌人受伤
- 击退效果：被攻击后退后
- 无敌帧：受伤后短暂无敌

### 3. 撤离点系统

**撤离点类型**:
- **固定撤离点**: 地图上固定位置
- **条件撤离点**: 需要特定物品解锁
- **随机撤离点**: 每次进入位置不同

**撤离条件**:
- 基本条件：到达撤离点
- 可选条件：搜集足够回忆价值

**撤离风险**:
- 撤离点附近敌人增多
- 需要一定时间"加载回忆"

### 4. 结算系统

**结算流程**:
1. 显示搜集的物品列表
2. 计算总回忆价值
3. 转换为回忆货币（1:1）
4. 显示统计（时间、搜集率、战斗次数）
5. 保存到存档

**结算界面**:
- 物品展示（带怀旧描述）
- 价值汇总动画
- 解锁成就提示

### 5. 梦境大厅系统

**大厅功能**:
- **记忆等级**: 影响起始属性
- **武器商店**: 购买战斗道具
- **技能树**: 解锁被动能力
- **回忆展览**: 查看已搜集物品

**货币系统**:
- 回忆货币（Memory Coins）
- 来自关卡结算
- 永久保存

---

## UI设计风格

**怪核视觉元素**:
- 低饱和度配色
- 轻微噪点/抖动效果
- 模糊/发光边缘
- 复古字体
- VHS扫描线效果

**配色方案**:
- 主背景: 深紫/深蓝 (#1a1a2e, #16213e)
- 强调色: 荧光绿/粉 (#00ff88, #ff6b9d)
- 文字: 米白 (#e8e8e8)
- 暗角: 黑色渐变

---

## 第一关卡设计: "童年小巷"

**主题**: 2000年代初的中国小巷
**氛围**: 黄昏、模糊的记忆、熟悉又陌生

**场景元素**:
- 老式居民楼
- 小卖部
- 自行车棚
- 电线杆
- 墙上的小广告

**可搜集物品**: 8-12个
**敌人数量**: 3-5个
**撤离点**: 2个（1个固定，1个条件）

---

## 技术架构

### 插件列表

1. **ESC_Core.js** - 核心系统管理
2. **ESC_CollisionBattle.js** - 即时碰撞战斗
3. **ESC_MemoryItem.js** - 回忆物品系统
4. **ESC_Extraction.js** - 撤离点系统
5. **ESC_Settlement.js** - 结算界面
6. **ESC_DreamLobby.js** - 梦境大厅
7. **ESC_VisualEffects.js** - 怪核视觉效果

### 数据结构

```javascript
// 回忆物品
{
  id: 1,
  name: "旧玩具车",
  description: "曾经最心爱的玩具...",
  memoryValue: 15,
  usable: false,
  iconIndex: 1,
  rare: false
}

// 敌人配置
{
  id: 1,
  name: "梦魇",
  hp: 30,
  damage: 10,
  speed: 2,
  sightRange: 4,
  dropItemId: 0
}
```

---

## 开发优先级

1. **P0 - 核心玩法**: 碰撞战斗 + 物品搜集 + 撤离点
2. **P1 - 完整循环**: 结算系统 + 梦境大厅基础
3. **P2 - 氛围增强**: 视觉效果 + 音效
4. **P3 - 内容扩充**: 更多物品、敌人、关卡
